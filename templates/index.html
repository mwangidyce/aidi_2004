<!DOCTYPE html>

<head>
  <style>
    .container {
      display: flex;
      justify-content: center;
      flex-direction: column;
      align-items: center;
    }
    .noShow {
      visibility: hidden;
    }
    .container label {
      margin-top: 0.5rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <label>Insert Image</label>
    <input
      type="file"
      id="avatar"
      name="avatar"
      accept="image/png, image/jpeg"
    />
    <button onclick="predict()">Predict</button>
    <span class="result noShow"></span>
  </div>

  <script>
    function predict() {
      const inputs = document.querySelectorAll(".container input");
      const obj = {};
      inputs.forEach((each) => {
        obj[each.name] = each.value;
      });
      console.log(obj);

      fetch("/classify", {
        method: "POST",
        body: JSON.stringify(obj),
        headers: {
          "Content-Type": "application/json",
        },
      })
        .then((response) => response.json())
        .then((data) => {
          console.log(data);
          updateDom(data.prediction);
        });
    }

    function updateDom(prediction) {
      const domItem = document.querySelector(".result");
      domItem.textContent = prediction;
      domItem.classList.toggle("noShow");
    }
  </script>
</body>
